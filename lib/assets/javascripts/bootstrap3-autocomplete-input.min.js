var autocomplete_data_static={};$(document).ready(function(){$('input[data-provide="typeahead"][data-source-array]').each(function(){obj=$(this);var t=JSON.parse(obj.attr("data-source-array").replace(/&quot;/g,'"'));obj.typeahead({source:t,items:obj.attr("data-items"),minLength:obj.attr("data-min-length")})}),$('input[data-provide="typeahead"][data-source]').each(function(){obj=$(this);var t=obj.attr("id");autocomplete_data_static[t]={map:[],values:[]},$.get(obj.attr("data-source"),function(a){$.each(a,function(a,e){autocomplete_data_static[t].values.push(e[1]),autocomplete_data_static[t].map[e[1]]=e[0]}),obj.typeahead({source:autocomplete_data_static[t].values,updater:function(a){return obj_id=$("#"+obj.attr("data-field-id")),obj_id&&obj_id.val(autocomplete_data_static[t].map[a]),a},items:obj.attr("data-items"),minLength:obj.attr("data-min-length")})},"json")}),$('input[data-provide="typeahead"][data-source-query]').each(function(){obj=$(this),obj.typeahead({source:function(t,a){obj=this.$element,rows=[];var e=obj.attr("name");autocomplete_data_static[e]={map:[],values:[]},$.getJSON(obj.attr("data-source-query"),{q:t},function(t){$.each(t,function(t,a){autocomplete_data_static[e].values.push(a[1]),autocomplete_data_static[e].map[a[1]]=a[0]}),a(autocomplete_data_static[e].values)})},updater:function(t){obj=this.$element;var a=obj.attr("name");return obj_id=$("#"+obj.attr("data-field-id")),obj_id&&obj_id.val(autocomplete_data_static[a].map[t]),t},items:obj.attr("data-items"),minLength:obj.attr("data-min-length"),afterSelect:function(t){var a=obj.attr("data-afterSelect")||"";if(""!=a){var e=window[a];"function"==typeof e&&e(t)}}})})});